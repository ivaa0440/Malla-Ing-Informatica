<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Malla Interactiva - Ingeniería en Informática</title>
  <style>
    body {
      background-color: #1e1e2f;
      color: #f0f0f0;
      font-family: Arial, sans-serif;
      padding: 20px;
    }
    h2 {
      color: #00c0ff;
      margin-top: 40px;
    }
    h3 {
      color: #00ffff;
      margin-top: 30px;
    }
    .year {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 10px;
      margin-bottom: 40px;
    }
    .subject {
      background-color: #2d2d40;
      border-radius: 10px;
      padding: 10px;
      cursor: pointer;
      transition: 0.3s;
      border: 1px solid transparent;
    }
    .subject.approved {
      background-color: #00c0ff;
      text-decoration: line-through;
    }
    .subject.available {
      background-color: #ccc;
      color: #000;
    }
    .subject.locked {
      background-color: #d0e7f9 !important;
      color: #666;
      cursor: not-allowed;
    }
    .subject:hover {
      border: 1px solid #00ffff;
    }
    .tooltip {
      position: relative;
    }
    .tooltip:hover::after {
      content: attr(data-tooltip);
      position: absolute;
      background: #333;
      color: #fff;
      padding: 5px;
      border-radius: 5px;
      top: 120%;
      left: 0;
      z-index: 1;
      white-space: pre-line;
    }
    button {
      background-color: #ff4444;
      color: white;
      border: none;
      padding: 12px 24px;
      font-size: 16px;
      border-radius: 10px;
      cursor: pointer;
      margin-top: 40px;
    }
  </style>
</head>
<body>
  <h1>Malla Interactiva - Ingeniería en Informática (UNLaM)</h1>

  <div id="malla"></div>

  <button onclick="resetMalla()">Reiniciar Malla</button>

  <script>
    const materias = `
PRIMER AÑO
Primer Cuatrimestre:
3621 - Matemática Discreta
3622 - Análisis Matemático I
3623 - Programación Inicial
3624 - Introducción a los Sistemas de Información
3625 - Sistemas de Numeración
3626 - Principios de Calidad de Software

Segundo Cuatrimestre:
3627 - Álgebra y Geometría Analítica I — (Correlativa: 3622)
3628 - Física I — (Correlativa: 3622)
3629 - Programación Estructurada Básica — (Correlativas: 3623, 3625)
3630 - Introducción a la Gestión de Proyectos — (Correlativa: 3624)
3631 - Fundamentos de Sistemas Embebidos — (Correlativa: 3625)
3632 - Introducción a los Proyectos Informáticos — (Correlativa: 3626)

SEGUNDO AÑO
Primer Cuatrimestre:
3633 - Análisis Matemático II — (Correlativa: 3622)
3634 - Física II — (Correlativa: 3628)
3635 - Hipótesis de Programación — (Correlativas: 3629, 3621)
3636 - Análisis de Sistemas — (Correlativas: 3629, 3621)
3637 - Arquitectura de Computadoras — (Correlativas: 3625, 3629)
3676 - Responsabilidad Social Universitaria — (Correlativa: 3626)

Segundo Cuatrimestre:
3639 - Análisis Matemático III — (Correlativa: 3633)
3640 - Algoritmos y Estructuras de Datos — (Correlativa: 3635)
3641 - Bases de Datos Aplicadas — (Correlativa: 3636)
3642 - Principios de Interfaces de Sistemas — (Correlativas: 3637, 3626)
3643 - Redes de Computadoras — (Correlativas: 3635, 3637)
3644 - Gestión de las Organizaciones — (Correlativas: 3636, 3635, 3624)
3645 - Taller de Integración — (Correlativas: 3629, 3635, 3636, 3637)

TERCER AÑO
Primer Cuatrimestre:
3646 - Álgebra y Geometría Analítica II — (Correlativa: 3627)
3647 - Paradigmas de Programación — (Correlativas: 3640, 3635)
3648 - Requisitos Informáticos — (Correlativas: 3641, 3636)
3649 - Diseño de Software — (Correlativas: 3641, 3647)
3650 - Seguridad de la Información — (Correlativas: 3641, 3643)
3675 - Práctica Profesional Supervisada — (Correlativa: 3642)

Segundo Cuatrimestre:
3651 - Probabilidad y Estadística — (Correlativas: 3646, 3621)
3652 - Programación Avanzada — (Correlativas: 3649, 3647)
3653 - Tecnologías de Bases de Datos — (Correlativa: 3641)
3654 - Virtualización de Hardware — (Correlativas: 3643, 3644)
3655 - Auditoría y Legislación — (Correlativas: 3643, 3644)

CUARTO AÑO
Primer Cuatrimestre:
3656 - Estadística Aplicada — (Correlativas: 3651, 3641)
3657 - Autómatas y Gramáticas — (Correlativas: 3652, 3648)
3658 - Programación Concurrente — (Correlativas: 3652, 3649)
3659 - Diseño de Procesos Avanzados — (Correlativas: 3654, 3644)
3660 - Arquitectura de Software — (Correlativas: 3652, 3649)
3661 - Gestión de Proyectos — (Correlativas: 3656, 3644)

Segundo Cuatrimestre:
3662 - Matemática Aplicada — (Correlativa: 3651)
3663 - Lenguajes y Compiladores — (Correlativa: 3657)
3664 - Inteligencia Artificial — (Correlativas: 3651, 3646)
3665 - Gestión Aplicada al Desarrollo de Software II — (Correlativas: 3659, 3652)
3666 - Seguridad Aplicada y Forensia — (Correlativas: 3655, 3652, 3649)
3667 - Gestión de la Calidad en Procesos de Sistemas — (Correlativa: 3647)

QUINTO AÑO
Primer Cuatrimestre:
3668 - Inteligencia Artificial Aplicada — (Correlativas: 3664, 3656)
3669 - Innovación y Emprendedorismo — (Correlativa: 3661)
3670 - Ciencia de Datos — (Correlativas: 3664, 3656)
3671 - Proyecto Final de Carrera* — (Correlativas: 3667, 3661, 3660)
3672 - Electiva I — (Correlativas: 3658, 3661, 3663)

Segundo Cuatrimestre:
3673 - Electiva II — (Correlativas: 3662, 3666)
3674 - Electiva III — (Correlativas: 3664, 3665)

ELECTIVAS
Electivas I:
3677 - Lenguaje Orientado a Negocios

Electivas II:
3678 - Tecnologías en Seguridad

Electivas III:
3679 - Visión Artificial

CONOCIMIENTOS COMUNES (HCS UNLaM)
901 - Inglés Transversal Nivel I
902 - Inglés Transversal Nivel II — (Correlativa: 901)
903 - Inglés Transversal Nivel III — (Correlativa: 902)
911 - Computación Transversal Nivel I
912 - Computación Transversal Nivel II — (Correlativa: 911)
    `;

    const container = document.getElementById("malla");

    function crearMalla() {
      container.innerHTML = "";
      const lines = materias.trim().split("\n");
      let bloque = null;

      lines.forEach(line => {
        if (!line.trim()) return;
        if (!line.includes(" - ")) {
          const header = document.createElement(line.includes("AÑO") ? "h2" : "h3");
          header.textContent = line;
          container.appendChild(header);
          if (line.includes("Cuatrimestre") || line.includes("ELECTIVAS") || line.includes("COMUNES")) {
            bloque = document.createElement("div");
            bloque.className = "year";
            container.appendChild(bloque);
          } else {
            bloque = null;
          }
        } else {
          const div = document.createElement("div");
          div.className = "subject available";
          const [codigo, resto] = line.split(" - ");
          const [nombre, correlativasRaw] = resto.split(" — ");
          div.textContent = `${codigo} - ${nombre.trim()}`;
          if (correlativasRaw) {
            div.classList.remove("available");
            div.classList.add("locked", "tooltip");
            div.dataset.tooltip = "Correlativas:\n" + correlativasRaw.replace(/\(.*?\)/g, '').trim();
          }
          div.onclick = () => {
            if (div.classList.contains("locked")) return;
            div.classList.toggle("approved");
          };
          bloque?.appendChild(div);
        }
      });
    }

    function resetMalla() {
      if (confirm("¿Queres resetear la Malla Interactiva?")) {
        localStorage.removeItem("malla-interactiva");
        crearMalla();
        guardarEstado();
      }
    }

    function guardarEstado() {
      const estados = [];
      document.querySelectorAll(".subject").forEach(m => {
        estados.push(m.classList.contains("approved"));
      });
      localStorage.setItem("malla-interactiva", JSON.stringify(estados));
    }

    function cargarEstado() {
      const data = JSON.parse(localStorage.getItem("malla-interactiva"));
      if (data) {
        document.querySelectorAll(".subject").forEach((m, i) => {
          if (data[i]) m.classList.add("approved");
        });
      }
    }

    crearMalla();
    cargarEstado();
    window.addEventListener("beforeunload", guardarEstado);
  </script>
</body>
</html>
