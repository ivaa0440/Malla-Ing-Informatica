<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Malla Curricular - Ingeniería en Informática</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #121212;
      color: #eee;
      margin: 0;
      padding: 1rem;
    }
    h1 {
      text-align: center;
      margin-bottom: 1rem;
    }
    .container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 1rem;
    }
    .year {
      background-color: #1e1e1e;
      border-radius: 10px;
      padding: 1rem;
      box-shadow: 0 0 5px rgba(0,0,0,0.5);
    }
    .year h2 {
      text-align: center;
      color: #ccc;
    }
    .subject {
      background-color: #333;
      padding: 0.5rem;
      margin: 0.3rem 0;
      border-radius: 6px;
      cursor: pointer;
      transition: background-color 0.2s;
      font-size: 0.9rem;
    }
    .subject.available {
      background-color: #0056b3;
    }
    .subject.approved {
      background-color: #28a745 !important;
      color: #fff;
      font-weight: 700;
    }
    .subject.blocked {
      background-color: #555;
      cursor: not-allowed;
      position: relative;
    }
    .subject.blocked::after {
      content: attr(data-tooltip);
      position: absolute;
      bottom: 100%;
      left: 0;
      right: 0;
      background-color: #000;
      color: #fff;
      padding: 4px;
      font-size: 0.7rem;
      white-space: normal;
      border-radius: 4px;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s;
    }
    .subject.blocked:hover::after {
      opacity: 1;
    }
    .counter {
      position: fixed;
      top: 10px;
      right: 10px;
      background-color: #222;
      padding: 10px;
      border-radius: 10px;
      color: gold;
      font-size: 1.1rem;
      box-shadow: 0 0 5px #000;
      z-index: 999;
    }
    #reset {
      position: fixed;
      bottom: 10px;
      right: 10px;
      background-color: #b30000;
      color: white;
      padding: 10px 15px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <h1>Malla Curricular - Ingeniería en Informática (UNLaM)</h1>
  <div class="counter" id="starCounter">★ 0 / 74</div>
  <div class="container" id="malla"></div>
  <button id="reset">Reiniciar Malla</button>
  <script>
    const materias = [
      // --- AÑO 1 ---
      { codigo: "3621", nombre: "Matemática Discreta" },
      { codigo: "3622", nombre: "Análisis Matemático I" },
      { codigo: "3623", nombre: "Programación Inicial" },
      { codigo: "3624", nombre: "Introducción a los Sistemas de Información" },
      { codigo: "3625", nombre: "Sistemas de Numeración" },
      { codigo: "3626", nombre: "Principios de Calidad de Software" },
      { codigo: "3627", nombre: "Álgebra y Geometría Analítica I", correlativas: ["3622"] },
      { codigo: "3628", nombre: "Física I", correlativas: ["3622"] },
      { codigo: "3629", nombre: "Programación Estructurada Básica", correlativas: ["3623", "3625"] },
      { codigo: "3630", nombre: "Introducción a la Gestión de Proyectos", correlativas: ["3624"] },
      { codigo: "3631", nombre: "Fundamentos de Sistemas Embebidos", correlativas: ["3625"] },
      { codigo: "3632", nombre: "Introducción a los Proyectos Informáticos", correlativas: ["3626"] },

      // --- AÑO 2 ---
      { codigo: "3633", nombre: "Análisis Matemático II", correlativas: ["3622"] },
      { codigo: "3634", nombre: "Física II", correlativas: ["3628"] },
      { codigo: "3635", nombre: "Hipótesis de Programación", correlativas: ["3629", "3621"] },
      { codigo: "3636", nombre: "Análisis de Sistemas", correlativas: ["3629", "3621"] },
      { codigo: "3637", nombre: "Arquitectura de Computadoras", correlativas: ["3625", "3629"] },
      { codigo: "3676", nombre: "Responsabilidad Social Universitaria", correlativas: ["3626"] },
      { codigo: "3639", nombre: "Análisis Matemático III", correlativas: ["3633"] },
      { codigo: "3640", nombre: "Algoritmos y Estructuras de Datos", correlativas: ["3635"] },
      { codigo: "3641", nombre: "Bases de Datos Aplicadas", correlativas: ["3636"] },
      { codigo: "3642", nombre: "Principios de Interfaces de Sistemas", correlativas: ["3637", "3626"] },
      { codigo: "3643", nombre: "Redes de Computadoras", correlativas: ["3635", "3637"] },
      { codigo: "3644", nombre: "Gestión de las Organizaciones", correlativas: ["3636", "3635", "3624"] },
      { codigo: "3645", nombre: "Taller de Integración", correlativas: ["3629", "3635", "3636", "3637"] },

      // --- AÑO 3 ---
      { codigo: "3646", nombre: "Álgebra y Geometría Analítica II", correlativas: ["3627"] },
      { codigo: "3647", nombre: "Paradigmas de Programación", correlativas: ["3640", "3635"] },
      { codigo: "3648", nombre: "Requisitos Informáticos", correlativas: ["3641", "3636"] },
      { codigo: "3649", nombre: "Diseño de Software", correlativas: ["3641", "3647"] },
      { codigo: "3650", nombre: "Seguridad de la Información", correlativas: ["3641", "3643"] },
      { codigo: "3675", nombre: "Práctica Profesional Supervisada", correlativas: ["3642"] },
      { codigo: "3651", nombre: "Probabilidad y Estadística", correlativas: ["3646", "3621"] },
      { codigo: "3652", nombre: "Programación Avanzada", correlativas: ["3649", "3647"] },
      { codigo: "3653", nombre: "Tecnologías de Bases de Datos", correlativas: ["3641"] },
      { codigo: "3654", nombre: "Virtualización de Hardware", correlativas: ["3643", "3644"] },
      { codigo: "3655", nombre: "Auditoría y Legislación", correlativas: ["3643", "3644"] },

      // --- AÑO 4 ---
      { codigo: "3656", nombre: "Estadística Aplicada", correlativas: ["3651", "3641"] },
      { codigo: "3657", nombre: "Autómatas y Gramáticas", correlativas: ["3652", "3648"] },
      { codigo: "3658", nombre: "Programación Concurrente", correlativas: ["3652", "3649"] },
      { codigo: "3659", nombre: "Diseño de Procesos Avanzados", correlativas: ["3654", "3644"] },
      { codigo: "3660", nombre: "Arquitectura de Software", correlativas: ["3652", "3649"] },
      { codigo: "3661", nombre: "Gestión de Proyectos", correlativas: ["3656", "3644"] },
      { codigo: "3662", nombre: "Matemática Aplicada", correlativas: ["3651"] },
      { codigo: "3663", nombre: "Lenguajes y Compiladores", correlativas: ["3657"] },
      { codigo: "3664", nombre: "Inteligencia Artificial", correlativas: ["3651", "3646"] },
      { codigo: "3665", nombre: "Gestión Aplicada al Desarrollo de Software II", correlativas: ["3659", "3652"] },
      { codigo: "3666", nombre: "Seguridad Aplicada y Forensia", correlativas: ["3655", "3652", "3649"] },
      { codigo: "3667", nombre: "Gestión de la Calidad en Procesos de Sistemas", correlativas: ["3647"] },

      // --- AÑO 5 ---
      { codigo: "3668", nombre: "Inteligencia Artificial Aplicada", correlativas: ["3664", "3656"] },
      { codigo: "3669", nombre: "Innovación y Emprendedorismo", correlativas: ["3661"] },
      { codigo: "3670", nombre: "Ciencia de Datos", correlativas: ["3664", "3656"] },
      { codigo: "3671", nombre: "Proyecto Final de Carrera", correlativas: ["3667", "3661", "3660"] },
      { codigo: "3672", nombre: "Electiva I", correlativas: ["3658", "3661", "3663"] },
      { codigo: "3673", nombre: "Electiva II", correlativas: ["3662", "3666"] },
      { codigo: "3674", nombre: "Electiva III", correlativas: ["3664", "3665"] },

      // --- ELECTIVAS ---
      { codigo: "3677", nombre: "Lenguaje Orientado a Negocios" },
      { codigo: "3678", nombre: "Tecnologías en Seguridad" },
      { codigo: "3679", nombre: "Visión Artificial" },

      // --- TRANSVERSALES ---
      { codigo: "901", nombre: "Inglés Transversal Nivel I" },
      { codigo: "902", nombre: "Inglés Transversal Nivel II", correlativas: ["901"] },
      { codigo: "903", nombre: "Inglés Transversal Nivel III", correlativas: ["902"] },
      { codigo: "911", nombre: "Computación Transversal Nivel I" },
      { codigo: "912", nombre: "Computación Transversal Nivel II", correlativas: ["911"] },
    ];

    const container = document.getElementById("malla");
    const counter = document.getElementById("starCounter");

    function getApprovedCodes() {
      return JSON.parse(localStorage.getItem("aprobadas") || "[]");
    }

    function saveApproved(codes) {
      localStorage.setItem("aprobadas", JSON.stringify(codes));
    }

    function createUI() {
      container.innerHTML = "";
      const aprobadas = getApprovedCodes();
      const total = materias.length;

      for (const mat of materias) {
        const div = document.createElement("div");
        div.classList.add("subject");
        div.textContent = `${mat.codigo} - ${mat.nombre}`;

        const desbloqueada = !mat.correlativas || mat.correlativas.every(c => aprobadas.includes(c));

        if (aprobadas.includes(mat.codigo)) {
          div.classList.add("approved");
        } else if (desbloqueada) {
          div.classList.add("available");
          div.addEventListener("click", () => {
            aprobadas.push(mat.codigo);
            saveApproved(aprobadas);
            createUI();
          });
        } else {
          div.classList.add("blocked");
          div.setAttribute("data-tooltip", "Correlativas: " + mat.correlativas.join(", "));
        }

        container.appendChild(div);
      }

      counter.textContent = `★ ${aprobadas.length} / ${total}`;
    }

    document.getElementById("reset").onclick = () => {
      if (confirm("¿Seguro que querés reiniciar la malla?")) {
        localStorage.removeItem("aprobadas");
        createUI();
      }
    };

    createUI();
  </script>
</body>
</html>
